<?xml version="1.0" encoding="UTF-8"?>

<?import de.jensd.fx.glyphs.fontawesome.FontAwesomeIconView?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<StackPane prefHeight="600.0" prefWidth="900.0" stylesheets="@styles.css" xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="bookrecommender.libri.DettagliLibroController">
    <children>
        <!-- Canvas per l'animazione di sfondo -->
        <Canvas fx:id="backgroundCanvas" />

        <!-- Contenuto principale -->
        <VBox alignment="TOP_CENTER" style="-fx-background-color: transparent;">
            <children>
                <!-- Header -->
                <StackPane styleClass="view-header">
                    <padding>
                        <Insets bottom="20" left="40" right="40" top="20" />
                    </padding>
                    <HBox alignment="CENTER_LEFT">
                        <children>
                            <Button onAction="#onBack" styleClass="header-back-button" text="← Torna indietro" />
                        </children>
                    </HBox>
                    <VBox alignment="CENTER" mouseTransparent="true">
                        <children>
                            <Label styleClass="header-title" text="Dettagli del Libro" />
                           
                        </children>
                    </VBox>
                </StackPane>

                <!-- ScrollPane per il contenuto -->
                <ScrollPane fitToWidth="true" styleClass="library-scroll-pane" VBox.vgrow="ALWAYS">
                    <content>
                        <AnchorPane>
                            <VBox alignment="TOP_CENTER" spacing="30" AnchorPane.topAnchor="30.0" AnchorPane.leftAnchor="40.0" AnchorPane.rightAnchor="40.0" AnchorPane.bottomAnchor="40.0">
                                <children>
                                    <!-- Pannello unico per tutti i dettagli -->
                                    <VBox maxWidth="800" styleClass="library-panel" spacing="25">
                                        <padding>
                                            <Insets top="30" right="40" bottom="30" left="40" />
                                        </padding>
                                        <children>
                                            <!-- Titolo e ID del libro -->
                                            <VBox spacing="5">
                                                <children>
                                                    <Label fx:id="titoloLabel" styleClass="book-title-large" text="Titolo del Libro" wrapText="true" />
                                                    <Label fx:id="idLabel" styleClass="info-text" text="#12345" />
                                                </children>
                                            </VBox>
                                            <Separator />
                                    <!-- Griglia per i dettagli principali -->
                                            <GridPane hgap="20" vgap="15">
                                                <columnConstraints>
                                                    <ColumnConstraints hgrow="NEVER" minWidth="120.0" />
                                                    <ColumnConstraints hgrow="ALWAYS" />
                                                </columnConstraints>

                                                <Label styleClass="section-title" text="Autore/i" GridPane.rowIndex="0" GridPane.columnIndex="0" />
                                                <Label fx:id="autoriLabel" styleClass="info-text" text="Nome Autore" wrapText="true" GridPane.rowIndex="0" GridPane.columnIndex="1" />

                                                <Label styleClass="section-title" text="Editore" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                                                <Label fx:id="editoreLabel" styleClass="info-text" text="Casa Editrice" GridPane.rowIndex="1" GridPane.columnIndex="1" />

                                                <Label styleClass="section-title" text="Anno" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                                                <Label fx:id="annoLabel" styleClass="info-text" text="Anno di pubblicazione" GridPane.rowIndex="2" GridPane.columnIndex="1" />
                                                
                                                <Label styleClass="section-title" text="Prezzo" GridPane.rowIndex="3" GridPane.columnIndex="0" />
                                                <Label fx:id="prezzoLabel" styleClass="info-text" text="€ 0.00" GridPane.rowIndex="3" GridPane.columnIndex="1" />
                                            </GridPane>

                                            <Separator />

                                            <!-- Descrizione -->
                                            <VBox spacing="15">
                                                <children>
                                                    <HBox alignment="CENTER_LEFT" spacing="10">
                                                        <FontAwesomeIconView glyphName="ALIGN_LEFT" styleClass="section-icon" />
                                                        <Label styleClass="section-title" text="Descrizione" />
                                                    </HBox>
                                                    <Label fx:id="descrizioneLabel" styleClass="info-text" text="Trama e dettagli del libro..." wrapText="true" />
                                                </children>
                                            </VBox>

                                            <Separator />

                                            <!-- Categorie -->
                                            <VBox spacing="15">
                                                <children>
                                                    <HBox alignment="CENTER_LEFT" spacing="10">
                                                        <FontAwesomeIconView glyphName="TAGS" styleClass="section-icon" />
                                                        <Label styleClass="section-title" text="Categorie" />
                                                    </HBox>
                                                    <Label fx:id="categorieLabel" styleClass="info-text" text="Genere Letterario" wrapText="true" />
                                                </children>
                                            </VBox>
                                        </children>
                                    </VBox>

                                    <!-- Sezione Valutazioni e Suggerimenti -->
                                    <HBox spacing="30" alignment="CENTER">
                                        <children>
                                            <!-- Pannello Valutazioni -->
                                            <VBox styleClass="library-panel" HBox.hgrow="ALWAYS" spacing="15">
                                                <padding>
                                                    <Insets top="25" right="30" bottom="25" left="30" />
                                                </padding>
                                                <children>
                                                    <HBox alignment="CENTER_LEFT" spacing="10">
                                                        <FontAwesomeIconView glyphName="STAR" styleClass="section-icon" />
                                                        <Label styleClass="section-title" text="Valutazioni" />
                                                    </HBox>
                                                    
                                                    <!-- Stelle per la media -->
                                                    <HBox spacing="8" alignment="CENTER">
                                                        <Label fx:id="mediaStella1" styleClass="media-stella"/>
                                                        <Label fx:id="mediaStella2" styleClass="media-stella"/>
                                                        <Label fx:id="mediaStella3" styleClass="media-stella"/>
                                                        <Label fx:id="mediaStella4" styleClass="media-stella"/>
                                                        <Label fx:id="mediaStella5" styleClass="media-stella"/>
                                                    </HBox>
                                                    
                                                    <!-- Valore numerico e numero valutazioni -->
                                                    <HBox alignment="CENTER" spacing="10">
                                                        <Label fx:id="lblMediaUtenti" text="0.0" styleClass="media-utenti-value"/>
                                                        <Label text="/ 5.0" styleClass="media-utenti-max"/>
                                                        <Label fx:id="lblNumeroValutazioni" text="(0 valutazioni)" styleClass="media-utenti-desc"/>
                                                    </HBox>
                                                    
                                                    <!-- Separatore -->
                                                    <Separator />
                                                    
                                                    <!-- Valutazioni Dettagliate per Criterio -->
                                                    <VBox spacing="15">
                                                        <HBox alignment="CENTER_LEFT" spacing="10">
                                                            <FontAwesomeIconView glyphName="CHART_BAR" styleClass="section-icon" />
                                                            <Label styleClass="section-title" text="Valutazioni per Criterio" />
                                                        </HBox>
                                                        
                                                        <!-- Griglia per le valutazioni per criterio -->
                                                        <GridPane hgap="15" vgap="8">
                                                            <columnConstraints>
                                                                <ColumnConstraints hgrow="NEVER" minWidth="100.0" />
                                                                <ColumnConstraints hgrow="NEVER" minWidth="80.0" />
                                                                <ColumnConstraints hgrow="ALWAYS" />
                                                            </columnConstraints>
                                                            
                                                            <!-- Stile -->
                                                            <Label styleClass="criterio-label" text="Stile" GridPane.rowIndex="0" GridPane.columnIndex="0" />
                                                            <HBox spacing="4" alignment="CENTER" GridPane.rowIndex="0" GridPane.columnIndex="1">
                                                                <Label fx:id="stileStella1" styleClass="criterio-stella"/>
                                                                <Label fx:id="stileStella2" styleClass="criterio-stella"/>
                                                                <Label fx:id="stileStella3" styleClass="criterio-stella"/>
                                                                <Label fx:id="stileStella4" styleClass="criterio-stella"/>
                                                                <Label fx:id="stileStella5" styleClass="criterio-stella"/>
                                                            </HBox>
                                                            <Label fx:id="lblMediaStile" text="0.0" styleClass="criterio-valore" GridPane.rowIndex="0" GridPane.columnIndex="2" />
                                                            
                                                            <!-- Contenuto -->
                                                            <Label styleClass="criterio-label" text="Contenuto" GridPane.rowIndex="1" GridPane.columnIndex="0" />
                                                            <HBox spacing="4" alignment="CENTER" GridPane.rowIndex="1" GridPane.columnIndex="1">
                                                                <Label fx:id="contenutoStella1" styleClass="criterio-stella"/>
                                                                <Label fx:id="contenutoStella2" styleClass="criterio-stella"/>
                                                                <Label fx:id="contenutoStella3" styleClass="criterio-stella"/>
                                                                <Label fx:id="contenutoStella4" styleClass="criterio-stella"/>
                                                                <Label fx:id="contenutoStella5" styleClass="criterio-stella"/>
                                                            </HBox>
                                                            <Label fx:id="lblMediaContenuto" text="0.0" styleClass="criterio-valore" GridPane.rowIndex="1" GridPane.columnIndex="2" />
                                                            
                                                            <!-- Gradevolezza -->
                                                            <Label styleClass="criterio-label" text="Gradevolezza" GridPane.rowIndex="2" GridPane.columnIndex="0" />
                                                            <HBox spacing="4" alignment="CENTER" GridPane.rowIndex="2" GridPane.columnIndex="1">
                                                                <Label fx:id="gradevolezzaStella1" styleClass="criterio-stella"/>
                                                                <Label fx:id="gradevolezzaStella2" styleClass="criterio-stella"/>
                                                                <Label fx:id="gradevolezzaStella3" styleClass="criterio-stella"/>
                                                                <Label fx:id="gradevolezzaStella4" styleClass="criterio-stella"/>
                                                                <Label fx:id="gradevolezzaStella5" styleClass="criterio-stella"/>
                                                            </HBox>
                                                            <Label fx:id="lblMediaGradevolezza" text="0.0" styleClass="criterio-valore" GridPane.rowIndex="2" GridPane.columnIndex="2" />
                                                            
                                                            <!-- Originalità -->
                                                            <Label styleClass="criterio-label" text="Originalità" GridPane.rowIndex="3" GridPane.columnIndex="0" />
                                                            <HBox spacing="4" alignment="CENTER" GridPane.rowIndex="3" GridPane.columnIndex="1">
                                                                <Label fx:id="originalitaStella1" styleClass="criterio-stella"/>
                                                                <Label fx:id="originalitaStella2" styleClass="criterio-stella"/>
                                                                <Label fx:id="originalitaStella3" styleClass="criterio-stella"/>
                                                                <Label fx:id="originalitaStella4" styleClass="criterio-stella"/>
                                                                <Label fx:id="originalitaStella5" styleClass="criterio-stella"/>
                                                            </HBox>
                                                            <Label fx:id="lblMediaOriginalita" text="0.0" styleClass="criterio-valore" GridPane.rowIndex="3" GridPane.columnIndex="2" />
                                                            
                                                            <!-- Edizione -->
                                                            <Label styleClass="criterio-label" text="Edizione" GridPane.rowIndex="4" GridPane.columnIndex="0" />
                                                            <HBox spacing="4" alignment="CENTER" GridPane.rowIndex="4" GridPane.columnIndex="1">
                                                                <Label fx:id="edizioneStella1" styleClass="criterio-stella"/>
                                                                <Label fx:id="edizioneStella2" styleClass="criterio-stella"/>
                                                                <Label fx:id="edizioneStella3" styleClass="criterio-stella"/>
                                                                <Label fx:id="edizioneStella4" styleClass="criterio-stella"/>
                                                                <Label fx:id="edizioneStella5" styleClass="criterio-stella"/>
                                                            </HBox>
                                                            <Label fx:id="lblMediaEdizione" text="0.0" styleClass="criterio-valore" GridPane.rowIndex="4" GridPane.columnIndex="2" />
                                                        </GridPane>
                                                    </VBox>
                                                    <HBox alignment="CENTER_RIGHT" style="-fx-padding-top: 10;">
                                                        <children>
                                                            <Button onAction="#onVisualizzaTutteLeRecensioni" styleClass="library-secondary-button" text="Tutte le recensioni">
                                                                <graphic>
                                                                    <FontAwesomeIconView fill="WHITE" glyphName="LIST_ALT" size="14" />
                                                                </graphic>
                                                            </Button>
                                                        </children>
                                                    </HBox>
                                                </children>
                                            </VBox>

                                            <!-- Pannello Suggerimenti -->
                                            <VBox styleClass="library-panel" HBox.hgrow="ALWAYS" spacing="15">
                                                <padding>
                                                    <Insets top="25" right="30" bottom="25" left="30" />
                                                </padding>
                                                <children>
                                                    <HBox alignment="CENTER_LEFT" spacing="10">
                                                        <FontAwesomeIconView glyphName="LIGHTBULB_ALT" styleClass="section-icon" />
                                                        <Label styleClass="section-title" text="Libri Suggeriti" />
                                                    </HBox>
                                                    <TableView fx:id="suggerimentiTable" prefHeight="500.0">
                                                        <columns>
                                                            <TableColumn fx:id="titoloSuggeritoColumn" style="-fx-alignment: CENTER;" text="Titolo" />
                                                            <TableColumn fx:id="idSuggeritoColumn" style="-fx-alignment: CENTER;" text="ID" />
                                                            <TableColumn fx:id="conteggioSuggeritoColumn" style="-fx-alignment: CENTER;" text="N. Suggerimenti" />
                                                        </columns>
                                                        <columnResizePolicy>
                                                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                                        </columnResizePolicy>
                                                    </TableView>
                                                </children>
                                            </VBox>
                                        </children>
                                    </HBox>
                                </children>
                            </VBox>
                        </AnchorPane>
                    </content>
                </ScrollPane>
            </children>
        </VBox>
    </children>
</StackPane>
